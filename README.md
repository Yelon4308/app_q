# Drawing Sync Server

–°–µ—Ä–≤–µ—Ä –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ —Ä–∏—Å–æ–≤–∞–Ω–∏—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ –º–µ–∂–¥—É Android (Kivy) –∏ PC –≤–µ—Ä—Å–∏—è–º–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

## üöÄ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- **Real-time —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è** —Ä–∏—Å–æ–≤–∞–Ω–∏—è —á–µ—Ä–µ–∑ WebSocket
- **–ì–µ–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã** –¥–ª—è —Ç–æ—á–Ω–æ–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –º–µ–∂–¥—É —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏ —Å —Ä–∞–∑–Ω—ã–º–∏ —ç–∫—Ä–∞–Ω–∞–º–∏
- **–°–∏—Å—Ç–µ–º–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π** –¥–ª—è Android APK, Windows EXE –∏ Linux AppImage
- **–ö–æ–º–Ω–∞—Ç—ã** –¥–ª—è –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- **–®–∞–±–ª–æ–Ω—ã** –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —ç–ª–µ–º–µ–Ω—Ç–æ–≤
- **REST API** –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
- **SQLite –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö** –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö

## üìã –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
```bash
pip install -r requirements.txt
```

### 2. –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞
```bash
python main.py
```
–°–µ—Ä–≤–µ—Ä –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É: `http://localhost:8000`

### 3. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- –û—Ç–∫—Ä–æ–π—Ç–µ `demo/drawing_demo.html` –≤ –±—Ä–∞—É–∑–µ—Ä–µ
- –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ –∫–æ–º–Ω–∞—Ç–µ –∏ –ø–æ–ø—Ä–æ–±—É–π—Ç–µ —Ä–∏—Å–æ–≤–∞—Ç—å
- –û—Ç–∫—Ä–æ–π—Ç–µ –≤—Ç–æ—Ä—É—é –≤–∫–ª–∞–¥–∫—É –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏

## üîå –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Kivy –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ñ–∞–π–ª `kivy_integration.py` –∫–∞–∫ –æ—Å–Ω–æ–≤—É:

```python
from kivy_integration import DrawingSyncClient, UpdateChecker

# –í –≤–∞—à–µ–º Kivy –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏
sync_client = DrawingSyncClient(
    server_url="ws://your-server:8000",
    room_id="drawing_room"
)

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ callbacks
sync_client.set_callback('on_drawing', self.on_remote_drawing)
sync_client.run_in_thread()

# –û—Ç–ø—Ä–∞–≤–∫–∞ –∫–æ–º–∞–Ω–¥ —Ä–∏—Å–æ–≤–∞–Ω–∏—è
sync_client.send_drawing_command(x, y, "draw", "#FF0000", 5, "brush")
```

## üåê –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ

–°–º–æ—Ç—Ä–∏—Ç–µ –ø–æ–¥—Ä–æ–±–Ω—É—é –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é –≤ `DEPLOYMENT_GUIDE.md`:
- DigitalOcean Droplet
- Heroku
- Railway.app
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–æ–º–µ–Ω–∞ –∏ SSL

## üì¶ –ó–∞–≥—Ä—É–∑–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π

```bash
# –ó–∞–≥—Ä—É–∑–∫–∞ –Ω–æ–≤–æ–π –≤–µ—Ä—Å–∏–∏ Android
python upload_app.py upload --platform android --version 1.1.0 --file app.apk --notes "–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ—à–∏–±–æ–∫"

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –≤–µ—Ä—Å–∏–π
python upload_app.py check
```

## üîÑ API Endpoints

### WebSocket
- `ws://localhost:8000/ws/{room_id}` - –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –∫–æ–º–Ω–∞—Ç–µ

### REST API
- `GET /api/status` - –°—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–µ—Ä–∞
- `GET /api/updates/check/{platform}?current_version=1.0.0` - –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
- `GET /api/updates/download/{platform}` - –°–∫–∞—á–∏–≤–∞–Ω–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
- `POST /api/updates/upload/{platform}` - –ó–∞–≥—Ä—É–∑–∫–∞ –Ω–æ–≤–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
- `GET /api/rooms/` - –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∫–æ–º–Ω–∞—Ç
- `GET /api/rooms/{room_id}` - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–æ–º–Ω–∞—Ç–µ

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞: `GET /api/status`
```json
{
  "status": "online",
  "connected_clients": 15,
  "active_rooms": 3,
  "timestamp": "2025-08-23T10:30:00"
}
```

## üß™ –§–∞–π–ª—ã –¥–ª—è –∏–∑—É—á–µ–Ω–∏—è

- `main.py` - –û—Å–Ω–æ–≤–Ω–æ–π —Å–µ—Ä–≤–µ—Ä FastAPI
- `websocket_handler.py` - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ WebSocket —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è–º–∏  
- `database.py` - –†–∞–±–æ—Ç–∞ —Å SQLite –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö
- `kivy_integration.py` - –ì–æ—Ç–æ–≤—ã–π –∫–æ–¥ –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å Kivy
- `demo/drawing_demo.html` - –í–µ–±-–¥–µ–º–æ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- `INTEGRATION_GUIDE.md` - –ü–æ–¥—Ä–æ–±–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
- `DEPLOYMENT_GUIDE.md` - –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é

## ÔøΩ –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

‚ö†Ô∏è **–í–∞–∂–Ω–æ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞:**
- –î–æ–±–∞–≤—å—Ç–µ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é –¥–ª—è upload endpoints
- –û–≥—Ä–∞–Ω–∏—á—å—Ç–µ —Ä–∞–∑–º–µ—Ä –∑–∞–≥—Ä—É–∂–∞–µ–º—ã—Ö —Ñ–∞–π–ª–æ–≤
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ HTTPS/WSS
- –ù–∞—Å—Ç—Ä–æ–π—Ç–µ rate limiting
- –í–∞–ª–∏–¥–∏—Ä—É–π—Ç–µ —Ç–∏–ø—ã —Ñ–∞–π–ª–æ–≤

## ÔøΩ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. ‚úÖ **–°–µ—Ä–≤–µ—Ä —Å–æ–∑–¥–∞–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç –ª–æ–∫–∞–ª—å–Ω–æ**
2. üîÑ **–ò–Ω—Ç–µ–≥—Ä–∏—Ä—É–π—Ç–µ —Å –≤–∞—à–∏–º Kivy –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º**
3. üåê **–†–∞–∑–≤–µ—Ä–Ω–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä –≤ –æ–±–ª–∞–∫–µ** 
4. üì± **–û–±–Ω–æ–≤–∏—Ç–µ URL –≤ –∫–ª–∏–µ–Ω—Ç—Å–∫–∏—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è—Ö**
5. üì¶ **–ó–∞–≥—Ä—É–∑–∏—Ç–µ –ø–µ—Ä–≤—ã–µ –≤–µ—Ä—Å–∏–∏ –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è**
6. üß™ **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é –º–µ–∂–¥—É —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏**

–£–¥–∞—á–∏ —Å –≤–∞—à–∏–º –ø—Ä–æ–µ–∫—Ç–æ–º! üé®
